{% extends "layout.html" %}

{% block body %}
    <!-- Natural Language Search Box -->
    {# Search Box #}
    <div class='well'>
        <div class='row'>
            <form class='form' method='POST' role='form' action="{{url_for('search_page.Search:index')}}">
              <div class='row'>
                <div class='col-md-6 col-md-offset-2'>
                  <div class='form-group'>
                    <div>{{searchform.searchbox.label}}: {{searchform.searchbox(class_='form-control', placeholder='ooooh type in me hard')}}</div>
                  </div>
                </div>
              </div>
            </form>
        </div>
    </div>

    <!-- Search Form Validation Errors -->
    {# Search Validation Errors #}
    {% if searchform.errors %}
        <div class='formerrors well alert-danger'>
            <h3 class='text-danger'>Form Validation Errors: Please try again!</h3>
            <ul class="errors text-danger">
                {% for field_name, field_errors in searchform.errors|dictsort if field_errors %}
                    {% for error in field_errors %}
                        <li>{{ searchform[field_name].label }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <!-- Search Results -->
        {% if formparams %}
            {# Search Results #}
            {% if results %}
                <div class='well' id='search_results'>
                    <div class='row' id='search_results_msg'>
                        <div class='col-md-10'>
                            <h3>Search results</h3>
                            <h4>Using filter: {{filter}}</h4>
                            <h5>Total Count: {{count}}, Showing Results: {{results}}</h5>
                        </div>
                    </div>
                </div>
            {% else %}
                {% if errmsg %}
                    <div class='well'>
                        <div class='row text-danger'>
                            <h3>Search Error</h3>
                            <h4>{{errmsg}}
                        </div>
                    </div>
                {% else %}
                    <div class='well'>
                        <div class='row'>
                            <h3>Search results</h3>
                            <h4>Using filter: {{filter}}</h4>
                            <h4>No results found</h4>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endif %}

{% endblock body %}

<!-- JS Code -->
{% block code %}
<script type='text/javascript'>

</script>
{% endblock code %}
