
{% from 'macros.html' import galidsearch, login %}

<nav class="navbar navbar-default">
    <div class="container-fluid">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{{url_for('index_page.Marvin:index')}}">Marvin</a>
        </div>

        <div class="navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="{{'active' if active_page=='help'}}"><a target='_blank' href="https://api.sdss.org/doc/manga/marvin/refactor/"><i class="fa fa-question-circle-o fa-fw" aria-hidden="true"></i>Help</a></li>
                <li class="{{'active' if active_page=='search'}}"><a href="{{url_for('search_page.Search:index')}}"><i class="fa fa-search fa-fw" aria-hidden="true"></i>Search</a></li>
            </ul>

            <!-- Galaxy ID Search Box-->
            {# Marvin PlateId/MaNGAId Search #}
            {{galidsearch('headform')}}

            <!-- MPL Version Selection -->
            {# MPL Version Selection #}
            <form class='navbar-form navbar-left navbar-input-group' id='mplform' role='form' method="post">
                <div id='marvinmpl' class='form-group'>
                    <select class='form-control selectpicker input-sm show-tick' id='mplselect' name='mplselect' title='Choose an MPL/DR' >
                        {% for ver in session.versions %}
                            {% if ver.name == session.currentmpl %}
                                <option data-subtext='{{ver.subtext}}' id='{{ver.name}}' value='{{ver.name}}' selected>{{ver.name}}</option>
                            {% else %}
                                <option data-subtext='{{ver.subtext}}' id='{{ver.name}}' value='{{ver.name}}'>{{ver.name}}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </form>

            <!-- Login / User Prefs -->
            {% if not session.login %}
                <!-- Login -->
                {# Login #}
                <div class='navbar-login'>
                  <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-sign-in fa-fw" aria-hidden="true"></i><b>Login</b> <span class="caret"></span></a>
                        <ul id="login-dp" class="dropdown-menu">
                            <li>
                                {{login()}}
                            </li>
                        </ul>
                    </li>
                  </ul>
                </div>
            {% else %}
                <!-- User Preferences -->
                {# User Preferences Post Login #}
                <div class='navbar-userprefs'>
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, User <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="/user/preferences"><i class="fa fa-cog fa-fw" aria-hidden="true"></i> Preferences</a></li>
                                <li class="divider"></li>
                                <li><a href="/auth/logout"><i class="fa fa-sign-out fa-fw" aria-hidden="true"></i> Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            {% endif %}

        </div>
    </div>
</nav>



